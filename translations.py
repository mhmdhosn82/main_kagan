"""
Persian/English translations for Kagan Collection Management Software
Supports RTL text and Vazir font integration
"""

# Translation dictionaries
TRANSLATIONS = {
    'en': {
        # Navigation
        'app_title': 'Kagan Collection Management System',
        'dashboard': 'Dashboard',
        'salon': 'Salon',
        'cafe_bar': 'Cafe Bar',
        'gamnet': 'Gamnet',
        'invoices': 'Invoices',
        'employees': 'Employees',
        'customers': 'Customers',
        'campaigns': 'Campaigns',
        'reports': 'Reports',
        'settings': 'Settings',
        'inventory': 'Inventory',
        'suppliers': 'Suppliers',
        'expenses': 'Expenses',
        'logout': 'Logout',
        
        # Login
        'login': 'Login',
        'username': 'Username',
        'password': 'Password',
        'login_button': 'Login',
        'login_failed': 'Login failed. Please check your credentials.',
        
        # Dashboard
        'dashboard_overview': 'Dashboard - Overview',
        'today_revenue': "Today's Revenue",
        'active_customers': 'Active Customers',
        'pending_appointments': 'Pending Appointments',
        'active_sessions': 'Active Sessions',
        'quick_actions': 'Quick Actions',
        'new_customer': 'New Customer',
        'create_invoice': 'Create Invoice',
        'book_appointment': 'Book Appointment',
        'start_gaming_session': 'Start Gaming Session',
        'recent_activity': 'Recent Activity',
        
        # Common
        'add': 'Add',
        'edit': 'Edit',
        'delete': 'Delete',
        'save': 'Save',
        'cancel': 'Cancel',
        'close': 'Close',
        'search': 'Search',
        'filter': 'Filter',
        'export': 'Export',
        'print': 'Print',
        'refresh': 'Refresh',
        'submit': 'Submit',
        'ok': 'OK',
        'yes': 'Yes',
        'no': 'No',
        'name': 'Name',
        'phone': 'Phone',
        'email': 'Email',
        'address': 'Address',
        'description': 'Description',
        'notes': 'Notes',
        'date': 'Date',
        'time': 'Time',
        'amount': 'Amount',
        'status': 'Status',
        'actions': 'Actions',
        
        # Invoice
        'invoice_cashier': 'Invoice & Cashier',
        'create_invoice_tab': 'Create Invoice',
        'payment': 'Payment',
        'invoice_history': 'Invoice History',
        'customer_phone': 'Customer Phone',
        'add_services_items': 'Add Services/Items',
        'type': 'Type',
        'apply_campaign': 'Apply Campaign',
        'campaign_code': 'Campaign Code',
        'current_invoice': 'Current Invoice',
        'total': 'Total',
        'discount': 'Discount',
        'final_amount': 'Final Amount',
        'payment_method': 'Payment Method',
        'cash': 'Cash',
        'card': 'Card',
        'wallet': 'Wallet',
        
        # Reports
        'reports_analytics': 'Reports & Analytics',
        'sales_reports': 'Sales Reports',
        'section_performance': 'Section Performance',
        'overall_stats': 'Overall Stats',
        'daily': 'Daily',
        'weekly': 'Weekly',
        'monthly': 'Monthly',
        'quarterly': 'Quarterly',
        'yearly': 'Yearly',
        'custom_range': 'Custom Range',
        
        # Settings
        'settings_title': 'Settings',
        'general': 'General',
        'appearance': 'Appearance',
        'business': 'Business',
        'sms_config': 'SMS Configuration',
        'backup': 'Backup & Restore',
        'users': 'Users',
        'theme': 'Theme',
        'language': 'Language',
        'font': 'Font',
        'dark_mode': 'Dark Mode',
        'light_mode': 'Light Mode',
        
        # SMS
        'sms_panel': 'SMS Panel',
        'send_sms': 'Send SMS',
        'sms_history': 'SMS History',
        'automatic_sms': 'Automatic SMS',
        'manual_sms': 'Manual SMS',
        'survey_sms': 'Survey SMS',
        'birthday_sms': 'Birthday SMS',
        'promotional_sms': 'Promotional SMS',
        
        # Inventory
        'inventory_management': 'Inventory Management',
        'products': 'Products',
        'stock': 'Stock',
        'low_stock_alerts': 'Low Stock Alerts',
        'add_product': 'Add Product',
        'quantity': 'Quantity',
        'unit_cost': 'Unit Cost',
        'selling_price': 'Selling Price',
        'reorder_level': 'Reorder Level',
        
        # Suppliers
        'supplier_management': 'Supplier Management',
        'add_supplier': 'Add Supplier',
        'purchase_orders': 'Purchase Orders',
        'contact_person': 'Contact Person',
        
        # Expenses
        'expense_tracking': 'Expense Tracking',
        'add_expense': 'Add Expense',
        'expense_category': 'Category',
        'rent': 'Rent',
        'utilities': 'Utilities',
        'salaries': 'Salaries',
        'other': 'Other',
    },
    'fa': {
        # Navigation (Persian)
        'app_title': 'سیستم مدیریت مجموعه کاگان',
        'dashboard': 'داشبورد',
        'salon': 'آرایشگاه',
        'cafe_bar': 'کافه بار',
        'gamnet': 'گیم نت',
        'invoices': 'فاکتورها',
        'employees': 'کارکنان',
        'customers': 'مشتریان',
        'campaigns': 'کمپین‌ها',
        'reports': 'گزارشات',
        'settings': 'تنظیمات',
        'inventory': 'موجودی انبار',
        'suppliers': 'تامین‌کنندگان',
        'expenses': 'هزینه‌ها',
        'logout': 'خروج',
        
        # Login (Persian)
        'login': 'ورود',
        'username': 'نام کاربری',
        'password': 'رمز عبور',
        'login_button': 'ورود به سیستم',
        'login_failed': 'ورود ناموفق. لطفا اطلاعات را بررسی کنید.',
        
        # Dashboard (Persian)
        'dashboard_overview': 'داشبورد - نمای کلی',
        'today_revenue': 'درآمد امروز',
        'active_customers': 'مشتریان فعال',
        'pending_appointments': 'نوبت‌های در انتظار',
        'active_sessions': 'جلسات فعال',
        'quick_actions': 'اقدامات سریع',
        'new_customer': 'مشتری جدید',
        'create_invoice': 'ایجاد فاکتور',
        'book_appointment': 'رزرو نوبت',
        'start_gaming_session': 'شروع بازی',
        'recent_activity': 'فعالیت‌های اخیر',
        
        # Common (Persian)
        'add': 'افزودن',
        'edit': 'ویرایش',
        'delete': 'حذف',
        'save': 'ذخیره',
        'cancel': 'لغو',
        'close': 'بستن',
        'search': 'جستجو',
        'filter': 'فیلتر',
        'export': 'خروجی',
        'print': 'چاپ',
        'refresh': 'به‌روزرسانی',
        'submit': 'ارسال',
        'ok': 'تایید',
        'yes': 'بله',
        'no': 'خیر',
        'name': 'نام',
        'phone': 'تلفن',
        'email': 'ایمیل',
        'address': 'آدرس',
        'description': 'توضیحات',
        'notes': 'یادداشت‌ها',
        'date': 'تاریخ',
        'time': 'زمان',
        'amount': 'مبلغ',
        'status': 'وضعیت',
        'actions': 'عملیات',
        
        # Invoice (Persian)
        'invoice_cashier': 'فاکتور و صندوق',
        'create_invoice_tab': 'ایجاد فاکتور',
        'payment': 'پرداخت',
        'invoice_history': 'تاریخچه فاکتورها',
        'customer_phone': 'تلفن مشتری',
        'add_services_items': 'افزودن خدمات/محصولات',
        'type': 'نوع',
        'apply_campaign': 'اعمال کمپین',
        'campaign_code': 'کد کمپین',
        'current_invoice': 'فاکتور جاری',
        'total': 'جمع کل',
        'discount': 'تخفیف',
        'final_amount': 'مبلغ نهایی',
        'payment_method': 'روش پرداخت',
        'cash': 'نقدی',
        'card': 'کارت',
        'wallet': 'کیف پول',
        
        # Reports (Persian)
        'reports_analytics': 'گزارشات و تحلیل',
        'sales_reports': 'گزارش فروش',
        'section_performance': 'عملکرد بخش‌ها',
        'overall_stats': 'آمار کلی',
        'daily': 'روزانه',
        'weekly': 'هفتگی',
        'monthly': 'ماهانه',
        'quarterly': 'فصلی',
        'yearly': 'سالانه',
        'custom_range': 'بازه دلخواه',
        
        # Settings (Persian)
        'settings_title': 'تنظیمات',
        'general': 'عمومی',
        'appearance': 'ظاهر',
        'business': 'کسب و کار',
        'sms_config': 'پیکربندی پیامک',
        'backup': 'پشتیبان‌گیری',
        'users': 'کاربران',
        'theme': 'تم',
        'language': 'زبان',
        'font': 'فونت',
        'dark_mode': 'حالت تیره',
        'light_mode': 'حالت روشن',
        
        # SMS (Persian)
        'sms_panel': 'پنل پیامک',
        'send_sms': 'ارسال پیامک',
        'sms_history': 'تاریخچه پیامک',
        'automatic_sms': 'پیامک خودکار',
        'manual_sms': 'پیامک دستی',
        'survey_sms': 'پیامک نظرسنجی',
        'birthday_sms': 'پیامک تولد',
        'promotional_sms': 'پیامک تبلیغاتی',
        
        # Inventory (Persian)
        'inventory_management': 'مدیریت موجودی',
        'products': 'محصولات',
        'stock': 'موجودی',
        'low_stock_alerts': 'هشدار موجودی کم',
        'add_product': 'افزودن محصول',
        'quantity': 'تعداد',
        'unit_cost': 'قیمت واحد',
        'selling_price': 'قیمت فروش',
        'reorder_level': 'حد سفارش مجدد',
        
        # Suppliers (Persian)
        'supplier_management': 'مدیریت تامین‌کنندگان',
        'add_supplier': 'افزودن تامین‌کننده',
        'purchase_orders': 'سفارشات خرید',
        'contact_person': 'شخص تماس',
        
        # Expenses (Persian)
        'expense_tracking': 'پیگیری هزینه‌ها',
        'add_expense': 'افزودن هزینه',
        'expense_category': 'دسته‌بندی',
        'rent': 'اجاره',
        'utilities': 'آب و برق',
        'salaries': 'حقوق',
        'other': 'سایر',
    }
}

class Translator:
    """Translation manager for multi-language support"""
    def __init__(self):
        self.current_language = 'fa'  # Default to Persian
        self.load_language_from_db()
    
    def load_language_from_db(self):
        """Load language preference from database"""
        try:
            from database import db
            setting = db.fetchone("SELECT value FROM settings WHERE key = 'language'")
            if setting:
                self.current_language = setting['value']
        except:
            pass
    
    def set_language(self, lang_code):
        """Set current language"""
        if lang_code in TRANSLATIONS:
            self.current_language = lang_code
            # Save to database
            try:
                from database import db
                db.execute("UPDATE settings SET value = ? WHERE key = 'language'", (lang_code,))
            except:
                pass
    
    def get(self, key, default=None):
        """Get translation for key"""
        translations = TRANSLATIONS.get(self.current_language, TRANSLATIONS['en'])
        return translations.get(key, default or key)
    
    def is_rtl(self):
        """Check if current language is RTL"""
        return self.current_language == 'fa'

# Global translator instance
translator = Translator()

def tr(key, default=None):
    """Quick translation function"""
    return translator.get(key, default)
